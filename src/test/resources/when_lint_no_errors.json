{
  "content" : "stages:\n  - build\n  - publish_gitlab\n\nvariables:\n  GRADLE_OPTS: \"-Dorg.gradle.daemon=false -Dorg.gradle.internal.launcher.welcomeMessageEnabled=false\"\n  CI: \"gitlab-ci\"\n\ncache:\n  key: ${CI_PROJECT_NAME}\n  paths:\n    - .gradle\n\n.build_release:\n  image: docker.io/library/gradle:7.5.1-jdk11\n  stage: publish_gitlab\n  only:\n    - master\n    - tags\n  artifacts:\n    when: always\n    paths:\n      - build/distributions/*.zip\n    expire_in: 360 days\n\n.build_artifact:\n  image: docker.io/library/gradle:7.5.1-jdk11\n  stage: build\n  only:\n    refs:\n      - merge_requests\n  artifacts:\n    when: always\n    paths:\n      - build/distributions/*.zip\n    expire_in: 7 days\n\nbuild_artifact:\n  extends: .build_artifact\n  script:\n    - gradle -Dversion.prerelease=$CI_PIPELINE_ID-SNAPSHOT buildPlugin\n\nrelease_artifact:\n  extends: .build_release\n  script:\n    - gradle buildPlugin"
}